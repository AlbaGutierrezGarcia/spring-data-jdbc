
<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="ES-es">
<head th:replace="fragments/library :: head">

</head>
<body>
<!--
       Esta distribución se propone por defecto para facilitar lo expuesto en
       https://www.youtube.com/watch?v=LQ3_vb8xqqU
    -->
<div class="container">
	<h1>Vista de Lista</h1>
	<header>
	</header>
	<main>

		<div class="col-12">
			<h1 class="text-center" th:text="${msj}"></h1>
		</div>

		<table class="table table-striped table-hover table-bordered align-middle">
			<tr>
				<th th:each="c : ${cabeceras}" th:text="${c}"></th>
				<th>Acciones</th>
			</tr>
			<tr th:each="fila : ${filas}">
				<td th:each="campo : ${fila}" th:text="${campo.value}"></td>
				<td>
					<a th:href="${urlForm + fila.get('codigo_empleado')}" class="btn btn-link p-0" title="Editar">
						<i class="bi bi-pencil-square"></i>
					</a>
					<form th:action="@{'/empleados/borrar/' + ${fila.get('codigo_empleado')}}" method="post" style="display:inline;">
						<input type="hidden" name="_method" value="delete"/>
						<button type="submit" class="btn btn-link p-0 ms-2"
								onclick="return confirm('¿Estás seguro de que deseas borrar este empleado?');"
								title="Borrar">
							<i class="bi bi-trash"></i>
						</button>
					</form>
				</td>
			</tr>
		</table>

		<!-- Modal Borrar -->
		<!--<div class="modal fade" id="modalBorrar" tabindex="-1" aria-labelledby="modalBorrarLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="modalBorrarLabel">Confirmar Borrado</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
					</div>
					<div class="modal-body">
						¿Estás seguro de que deseas borrar este empleado?
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
						<form id="formBorrarEmpleado" method="post" th:action="@{'/empleados/borrar/__id__'}">
							<input type="hidden" name="_method" value="delete"/>
							<button type="submit" class="btn btn-danger">Borrar</button>
						</form>
					</div>
				</div>
			</div>
		</div>-->

	</main>
	<footer>
	</footer>
</div>

<!-- Optional JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.min.js"
        integrity="sha384-RuyvpeZCxMJCqVUGFI0Do1mQrods/hhxYlcVfGPOfQtPJh0JCw12tUAZ/Mv10S7D"
        crossorigin="anonymous"></script>

<!--<script>
	document.addEventListener('DOMContentLoaded', function() {
		const modalBorrar = document.getElementById('modalBorrar');
		const formBorrar = document.getElementById('formBorrarEmpleado');
		const originalAction = formBorrar.getAttribute('th:action') || formBorrar.getAttribute('action');

		modalBorrar.addEventListener('show.bs.modal', function (event) {
			const button = event.relatedTarget;
			const empleadoId = button.getAttribute('data-id');
			// Reemplaza __id__ en la URL del form por el id real
			const action = originalAction.replace('__id__', empleadoId);
			formBorrar.setAttribute('action', action);
		});
	});
</script>-->

</body>
</html>